# Makefile для сборки модуля ядра process_info
#
# Этот Makefile используется для компиляции модуля ядра из исходного файла.
# Основной целью является создание .ko файла, который можно загрузить в ядро Linux.
#
# Правила:
# all: Компилирует модуль ядра
# clean: Удаляет все созданные файлы при компиляции

# Определяем имя объектного файла, который будет скомпилирован в модуль ядра
# obj-m указывает, что мы создаем модуль ядра, а не встроенный компонент
obj-m += process_info.o

# Правило для сборки модуля ядра
# Вызывает make в директории исходников ядра с указанием текущей директории (M=)
# как местоположения исходных файлов модуля
all:
	# -C указывает директорию, в которую нужно перейти перед выполнением make
	# /lib/modules/$(shell uname -r)/build - путь к исходникам ядра текущей системы
	# M=$(PWD) указывает путь к исходным файлам модуля (текущая директория)
	# modules - цель сборки (собрать модули)
	make -C /lib/modules/$(shell uname -r)/build M=$(PWD) modules

# Правило для очистки директории от файлов, созданных при сборке
clean:
	# Вызывает make в директории исходников ядра для удаления всех созданных файлов
	make -C /lib/modules/$(shell uname -r)/build M=$(PWD) clean